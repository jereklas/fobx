(()=>{var p=Object.defineProperty;var f=(c,e,s)=>e in c?p(c,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[e]=s;var o=(c,e,s)=>f(c,typeof e!="symbol"?e+"":e,s);var h=class{constructor(){o(this,"metadata",null);o(this,"isLoading",!1);o(this,"searchQuery","");o(this,"searchResults",[]);o(this,"showResults",!1);o(this,"selectedIndex",-1);o(this,"dropdownPosition","left");o(this,"searchRef",null);o(this,"inputRef",null);this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}setup(){this.setupSearch(),this.setupSmoothScrolling(),this.loadMetadata()}setupSearch(){this.searchRef=document.querySelector(".docs-search"),this.inputRef=document.querySelector(".docs-search-input"),!(!this.searchRef||!this.inputRef)&&(this.inputRef.addEventListener("input",e=>this.handleSearchChange(e)),this.inputRef.addEventListener("keydown",e=>this.handleKeyDown(e)),this.inputRef.addEventListener("focus",()=>this.handleSearchFocus()),document.addEventListener("mousedown",e=>this.handleClickOutside(e)),window.addEventListener("resize",()=>this.handleResize()))}setupSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(i=>{i.addEventListener("click",t=>{let a=i.getAttribute("href");a&&a.startsWith("#")&&a.length>1&&(t.preventDefault(),this.smoothScrollToElement(a.substring(1)))})}),document.querySelectorAll('.toc-link[href^="#"]').forEach(i=>{i.addEventListener("click",t=>{let a=i.getAttribute("href");a&&a.startsWith("#")&&a.length>1&&(t.preventDefault(),this.smoothScrollToElement(a.substring(1)))})})}smoothScrollToElement(e){let s=document.getElementById(e);if(s){let t=s.offsetTop-80;window.scrollTo({top:t,behavior:"smooth"}),history.pushState(null,"",`#${e}`),this.updateActiveTocItem(e)}}updateActiveTocItem(e){document.querySelectorAll(".toc-link").forEach(t=>t.classList.remove("active"));let i=document.querySelector(`.toc-link[href="#${e}"]`);i&&i.classList.add("active")}async loadMetadata(){this.isLoading=!0,this.updateSearchPlaceholder();try{let e=this.getBaseUrl(),s=await fetch(`${e}/metadata.json`);s.ok&&(this.metadata=await s.json())}catch(e){console.error("Failed to load search metadata:",e)}finally{this.isLoading=!1,this.updateSearchPlaceholder()}}getBaseUrl(){let e=document.querySelector('meta[name="base-url"]'),s=e?e.getAttribute("content"):"/";return s==="/"?"":s??""}updateSearchPlaceholder(){this.inputRef&&(this.inputRef.placeholder="Search docs...",this.inputRef.disabled=!this.metadata||this.isLoading)}calculateDropdownPosition(){if(this.searchRef){let e=this.searchRef.getBoundingClientRect(),s=window.innerWidth;e.left+500>s-20?this.dropdownPosition="right":this.dropdownPosition="left"}}performSearch(e){if(!this.metadata||!e.trim())return[];let s=[],i=e.toLowerCase();return this.metadata.routes.forEach(t=>{if(t.frontmatter.redirect||t.frontmatter.hideInNav)return;t.title.toLowerCase().includes(i)&&s.push({title:t.title,path:t.path,description:t.frontmatter.description,type:"page"}),t.content.toc&&t.content.toc.forEach(r=>{r.title.toLowerCase().includes(i)&&s.push({title:r.title,path:`${t.path}#${r.id}`,description:`From: ${t.title}`,type:"heading"}),r.children&&r.children.forEach(n=>{n.title.toLowerCase().includes(i)&&s.push({title:n.title,path:`${t.path}#${n.id}`,description:`From: ${t.title}`,type:"heading"})})});let a=r=>typeof r=="string"?r:r&&r.children&&Array.isArray(r.children)?r.children.map(a).join(" "):"";if(t.content.ast&&t.content.ast.children){let r=a(t.content.ast).toLowerCase();if(r.includes(i)&&!s.some(n=>n.path===t.path&&n.type==="page")){let n=r.indexOf(i),l=Math.max(0,n-50),d=Math.min(r.length,n+i.length+50),u=r.slice(l,d);s.push({title:t.title,path:t.path,excerpt:`...${u}...`,type:"page"})}}}),s.sort((t,a)=>{let r=t.title.toLowerCase()===i,n=a.title.toLowerCase()===i;return r&&!n?-1:!r&&n?1:t.type==="page"&&a.type==="heading"?-1:t.type==="heading"&&a.type==="page"?1:t.title.localeCompare(a.title)}).slice(0,10)}highlightSearchTerm(e,s){if(!s.trim())return e;let i=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t=new RegExp(`(\\s*)(${i})(\\s*)`,"gi");return e.replace(t,'$1<mark class="search-highlight">$2</mark>$3')}renderSearchResults(){let e=document.querySelector(".docs-search-results");if(e&&e.remove(),!this.showResults)return;let s=document.createElement("div");s.className=`docs-search-results position-${this.dropdownPosition}`,this.searchResults.length===0&&this.searchQuery.trim()?s.innerHTML=`
        <div class="docs-search-no-results">
          No results found for "${this.searchQuery}"
        </div>
      `:this.searchResults.length>0&&(s.innerHTML=this.searchResults.map((i,t)=>`
          <div class="docs-search-result ${t===this.selectedIndex?"selected":""}" 
               data-index="${t}"
               data-type="${i.type}">
            <div class="docs-search-result-title">
              ${this.highlightSearchTerm(i.title,this.searchQuery)}
            </div>
            ${i.description?`
              <div class="docs-search-result-description">
                ${this.highlightSearchTerm(i.description,this.searchQuery)}
              </div>
            `:""}
            ${i.excerpt?`
              <div class="docs-search-result-excerpt">
                ${this.highlightSearchTerm(i.excerpt,this.searchQuery)}
              </div>
            `:""}
          </div>
        `).join(""),s.addEventListener("click",i=>{let t=i.target.closest(".docs-search-result");if(t){let a=parseInt(t.getAttribute("data-index")||"0");this.handleResultClick(this.searchResults[a])}}),s.addEventListener("mouseover",i=>{let t=i.target.closest(".docs-search-result");t&&(this.selectedIndex=parseInt(t.getAttribute("data-index")||"0"),this.updateSelectedResult())})),this.searchRef.appendChild(s)}updateSelectedResult(){document.querySelectorAll(".docs-search-result").forEach((s,i)=>{s.classList.toggle("selected",i===this.selectedIndex)}),this.scrollSelectedIntoView()}scrollSelectedIntoView(){if(this.selectedIndex<0)return;let e=document.querySelector(".docs-search-results"),s=document.querySelector(".docs-search-result.selected");if(!e||!s)return;let i=e.getBoundingClientRect(),t=s.getBoundingClientRect();t.top<i.top?e.scrollTop-=i.top-t.top:t.bottom>i.bottom&&(e.scrollTop+=t.bottom-i.bottom)}handleSearchChange(e){let s=e.target.value;this.searchQuery=s,s.trim()?(this.searchResults=this.performSearch(s),this.showResults=!0,this.selectedIndex=-1,this.calculateDropdownPosition()):(this.searchResults=[],this.showResults=!1),this.renderSearchResults()}handleKeyDown(e){if(!(!this.showResults||this.searchResults.length===0))switch(e.key){case"ArrowDown":e.preventDefault(),this.selectedIndex=Math.min(this.selectedIndex+1,this.searchResults.length-1),this.updateSelectedResult();break;case"ArrowUp":e.preventDefault(),this.selectedIndex=Math.max(this.selectedIndex-1,-1),this.updateSelectedResult();break;case"Enter":e.preventDefault(),this.selectedIndex>=0&&this.handleResultClick(this.searchResults[this.selectedIndex]);break;case"Escape":this.hideSearchResults(),this.inputRef&&this.inputRef.blur();break}}handleSearchFocus(){this.searchQuery.trim()&&this.searchResults.length>0&&(this.showResults=!0,this.calculateDropdownPosition(),this.renderSearchResults())}hideSearchResults(){this.showResults=!1,this.selectedIndex=-1;let e=document.querySelector(".docs-search-results");e&&e.remove()}handleClickOutside(e){this.searchRef&&!this.searchRef.contains(e.target)&&this.hideSearchResults()}handleResize(){this.showResults&&(this.calculateDropdownPosition(),this.renderSearchResults())}handleResultClick(e){this.hideSearchResults(),this.searchQuery="",this.inputRef&&(this.inputRef.value="");let i=`${this.getBaseUrl()}${e.path}`;window.location.href=i}};new h;})();
